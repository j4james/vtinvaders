// VT Invaders
// Copyright (c) 2024 James Holderness
// Distributed under the MIT License

#include "font.h"

#include "capabilities.h"

#include <iostream>
#include <string>

constexpr auto font_8x10 = R"(0;1;1;4;0;0{ @
???]]???/????????;
???FF???/????????;
kk}}}}kk/DDAAAADD;
?GG}}OO?/?@@BBAA?;
{{{{{{{{/NNNNNNNN;
?cc}}QQ?/???BB???;
__ccGGOO/??CCAA@@;
???{{ooy/?????DDB;
yoo{{???/BDD?????;
ACC??CCA/CAA??AAC;
kk}}}}kk/D?@@@@?D;
????????/CC???CC?;
?__ooooo/?FFFFFFF;
????????/CC???CC?;
???__ooW/?@@@@BBF;
?{AaQI{?/?BDCCCB?;
??C}????/??CFC???;
?CaQQQK?/?FCCCCC?;
?AAAQYe?/?ACCCCB?;
?_OGC}??/?@@@@F@?;
?]QQQQa?/?ACCCCB?;
?wSQQQa?/?BCCCCB?;
?AAaQIE?/???F????;
?kQQQQk?/?BCCCCB?;
?[aaaa{?/?CCCCA@?;
??????oo/??????CC;
oo??????/CC??????;
???__ooy/???BB??B;
ooooo__?/FFFFFFF?;
yoo__???/B??BB???;
OyywwssG/DDDFFFFD;
Y{{{{{{X/A??????@;
?wcaacw?/?F????F?;
cc??II__/??DDEEAA;
?{AAAAC?/?BCCCCA?;
?}AAAA{?/?FCCCCB?;
?}QQQAA?/?FCCCCC?;
ss__GGGG/EEFFFFFF;
?{AAaaa?/?BCCCCF?;
YY__gg??/EEFFFFEE;
???A}A??/???CFC??;
ww{{[[{{/BB@@@@BB;
cc??????/CC@@EE?C;
{{[[{{ww/BB@@@@BB;
?}KOOK}?/?F????F?;
?}GO_?}?/?F???@F?;
?{AAAA{?/?BCCCCB?;
ccCCAAOO/EE??@@CC;
????OO??/@@CCEEEE;
?}aaaa[?/?F??@AC?;
?KQQQQc?/?ACCCCB?;
AAA}AAA?/???F????;
kwwwwwwk/@@@@@@@@;
?}????}?/??BCCB??;
~~~~~~~~/BBBBBBBB;
mm}}}}mm/@@AAAA@@;
???FF???/CCCCCCCC;
????????/????????;
??ww{{{{/??CCCCAA;
Woo__???/FBB@@@@?;
{{{{ww??/AACCCC??;
o{{}}{{o/FFFFFFFF;
????????/CCCCCCCC;
OOGGcc__/@@AACC??;
~^^vv^^N/????????;
wwoo__??/NNNNNNNN;
C@@AA@@B/????????;
??__ooww/NNNNNNNN;
??__ooww/@@AA@@??;
wwoo__??/AA@@??@@;
FJJFFNNF/????????;
?@@AA@@B/????????;
??????oo/??????AA;
oo??????/AA??????;
{{{kk{{[/@??@@???;
???????o/NNNMMNNN;
o???????/NNNMMNNN;
????????/GG?????K;
{oo__oow/BBBBBBBB;
~~^^NNNN/????????;
NNNN^^~~/????????;
o__??__w/NNNNNNNN;
??_oooo{/??FFFFFF;
????????/KGG??GGM;
kwwwwwwk/DDD@@DDD;
~{[WGKKM/????????;
NKKGW[{~/????????;
mm}}}}mm/@@AAAA@@;
G??????A/????????;
{oooo_??/FFFFFF??;
??ww{{{{/????AAFF;
????????/???NN???;
{{{{ww??/FFAA????;
????????/????????
)";

constexpr auto font_15x12 = R"(0;1;1;15;0;2;12;0{ @
??????}}}??????/???????????????;
??????FFF??????/???????????????;
KKK}}}}}}KKKwww/JJJDDDDDDJJJDDD;
???GGG}}}ooo???/???AAAFFFCCC???;
{{{{{{{{{{{{{{{/~~~~~~~~~~~~~~~;
???CCC}}}qqq???/???@@@FFF??????;
??????CCCGGGOOO/???@@@HHHCCCAAA;
??????{{{oooyyy/??????@@@JJJFFF;
yyyooo{{{??????/FFFJJJ@@@??????;
AAACCC???CCCAAA/OOOGGG???GGGOOO;
KKK}}}}}}KKKwww/@@@BBBBBB@@@JJJ;
???????????????/???OOO???OOO???;
??????ooooooooo/???NNNNNNNNNNNN;
???????????????/OOO???OOO???OOO;
????????????ooo/??????AAABBBFFF;
??{{AAaaQQ{{???/??FFHHGGGGFF???;
????CC}}???????/????GGNNGG?????;
??CCAAaaaa[[???/??MMHHGGGGGG???;
??AAAAaaqqMM???/??CCGGGGGGFF???;
??__WWEE}}?????/??BBAAAANNAA???;
??]]QQQQQQaa???/??CCGGGGGGFF???;
??wwccaaaaAA???/??FFGGGGGGFF???;
??AAAAaaQQMM???/????NN?????????;
??[[aaaaaa[[???/??FFGGGGGGFF???;
??[[aaaaaa{{???/??GGGGGGCCBB???;
?????????ooowww/?????????HHHDDD;
ooo????????????/HHH????????????;
?????????oooyyy/??????FFF@@@FFF;
ooooooooo??????/NNNNNNNNNNNN???;
yyyooo?????????/FFF@@@FFF??????;
???sssoooGGGooo/TTTVVV^^^^^^SSS;
yyy{{{{{{{{{xxx/CCC@@@@@@@@@AAA;
??wwCCAACCww???/??NN@@@@@@NN???;
CCC???III??????/@@@IIIKKKDDDKKK;
??{{AAAAAACC???/??FFGGGGGGCC???;
??}}AAAAAA{{???/??NNGGGGGGFF???;
??}}aaaaaaAA???/??NNGGGGGGGG???;
sss????????????/LLLNNNMMMMMMLLL;
??{{AAAAAAAA???/??FFGGGGHHNN???;
yyy???GGG???GGG/KKKNNNNNNKKKNNN;
????AA}}AA?????/????GGNNGG?????;
wwwwww{{{{{{{{{/MMMFFFBBBAAAFFF;
CCC????????????/HHHAAAKKK???GGG;
{{{{{{{{{wwwwww/FFFAAABBBFFFMMM;
??}}KKooKK}}???/??NN??????NN???;
??}}WW__??}}???/??NN????BBNN???;
??{{AAAAAA{{???/??FFGGGGGGFF???;
CCCCCCAAAoooCCC/LLL???AAAGGG@@@;
??????ooo??????/AAAGGGKKKKKKMMM;
??}}aaaaaa[[???/??NN??@@AAKK???;
??[[aaaaaaCC???/??CCGGGGGGFF???;
??AAAA}}AAAA???/??????NN???????;
KKKwwwwwwwwwKKK/BBBBBBBBBBBBBBB;
??}}??????}}???/??BBCCGGCCBB???;
~~~~~~~~~~~~~~~/FFFFFFFFFFFFFFF;
MMM}}}}}}MMMKKK/BBBDDDDDDBBBFFF;
??????FFF??????/OOOOOOOOOOOOOOO;
???????????????/???????????????;
???www{{{{{{KKK/???HHHHHHDDDFFF;
ooo????????????/FFFBBBAAA??????;
{{{{{{www??????/DDDHHHHHH??????;
ooo{{{}}}{{{ooo/NNNNNNNNNNNNNNN;
???????????????/OOOOOOOOOOOOOOO;
OOOGGGCCC??????/AAACCCHHH@@@???;
~~~~~~vvv~~~NNN/@@@???@@@??????;
{{{wwwooo??????/~~~~~~~~~~~~}}};
GGG@@@AAA@@@BBB/???????????????;
??????ooowww{{{/}}}~~~~~~~~~~~~;
??????ooowww{{{/AAADDDBBB@@@BBB;
{{{wwwooo??????/BBBDDDBBB@@@AAA;
FFFJJJFFFNNNFFF/???????????????;
???@@@AAA@@@BBB/???????????????;
?????????ooowww/?????????DDDJJJ;
ooo????????????/DDD????????????;
{{{{{{KKK{{{{{{/BBB@@@BBB@@@???;
????????????ooo/}}}}}}{{{}}}~~~;
ooo????????????/~~~}}}{{{}}}}}};
???????????????/______??????www;
{{{ooo???ooowww/FFFFFFFFFFFFFFF;
~~~~~~NNNNNNNNN/@@@????????????;
NNNNNNNNN~~~~~~/????????????@@@;
ooo?????????www/~~~~~~}}}~~~~~~;
???????oooooo{}/?????NNNNNNNNNN;
???????????????/wwwooo???ooo{{{;
KKKwwwwwwwwwKKK/JJJJJJBBBJJJJJJ;
~~~{{{GGGKKKMMM/@@@????????????;
NNNKKKGGG{{{~~~/????????????@@@;
MMM}}}}}}MMMKKK/BBBDDDDDDBBBJJJ;
GGG?????????AAA/???????????????;
}{oooooo???????/NNNNNNNNNN?????;
???www{{{{{{KKK/???@@@DDDNNNJJJ;
???????????????/??????}}}??????;
{{{{{{www??????/NNNDDD@@@??????;
???????????????/???????????????
)";

constexpr auto font_10x20 = R"(0;1;1;10;0;2;20;0{ @
????{{????/????NN????/??????????/??????????;
????~~????/??????????/??????????/??????????;
oo{{{{oo??/rr~~~~rr~~/rrKKKKrrKK/??????????;
????{{????/??BB~~KK??/??BBNNKK??/??????????;
oooooooooo/~~~~~~~~~~/~~~~~~~~~~/BBBBBBBBBB;
??oo{{KK??/??oo~~KK??/????NN????/??????????;
????oo????/??ooooBBKK/????ooKKBB/??????????;
????oo??KK/????~~{{~~/??????rrNN/??????????;
KK??oo????/~~{{~~????/NNrr??????/??????????;
KKoo??ooKK/??????????/ooKK??KKoo/??????????;
oo{{{{oo??/rr~~~~rr~~/??BBBB??rr/??????????;
??????????/??????????/??oo??oo??/??????????;
??????????/??oo{{{{{{/??~~~~~~~~/??????????;
??????????/??????????/oo??oo??oo/??????????;
??????????/??????oo{{/????BBBBNN/??????????;
??oKKKKo??/??~?oKB~??/??NroooN??/??????????;
???o{?????/????~?????/???o~o????/??????????;
??oKKKKo??/???_WWWF??/??}poooo??/??????????;
??KKKKK{??/?????W]`??/??KooooN??/??????????;
?????o{???/??oKB?~???/??BBBB~B??/??????????;
??{KKKKK??/??FEEEEw??/??KooooN??/??????????;
???oKKKK??/??~WWWW_??/??NooooN??/??????????;
??KKKKK{??/????_[B???/????~?????/??????????;
??oKKKKo??/??fWWWWf??/??NooooN??/??????????;
??oKKKKo??/??FWWWW~??/??ooooKB??/??????????;
??????????/??????{{~~/??????ooKK/??????????;
??????????/{{????????/oo????????/??????????;
????????KK/????oo{{~~/????NN??NN/??????????;
??????????/{{{{{{oo??/~~~~~~~~??/??????????;
KK????????/~~{{oo????/NN??NN????/??????????;
??KK??oo??/KK~~~~{{BB/rrrr~~~~rr/??????????;
KKooooooBB/NN~~~~~~NN/KK??????BB/??????????;
???oKKo???/??}`__`}??/??~@@@@~??/??????????;
oo??KK????/oo??BBoo??/??rr{{KK{{/??????????;
??oKKKKo??/??~???????/??NooooK??/??????????;
??{KKKKo??/??~????~??/??~ooooN??/??????????;
??{KKKKK??/??~WWW????/??~ooooo??/??????????;
oo????????/{{ooBBBBoo/{{~~~~~~{{/??????????;
??oKKKKK??/??~??WWw??/??Noooo~??/??????????;
KK????????/NNoorr??rr/{{~~~~{{~~/??????????;
????K{K???/?????~????/????o~o???/??????????;
????oooooo/NN~~~~NN~~/~~NNBBBBNN/??????????;
oo????????/oo????????/ooBB{{??oo/??????????;
oooooo????/~~NN~~~~NN/NNBBBBNN~~/??????????;
??{_??_{??/??~BKKB~??/??~????~??/??????????;
??{????{??/??~BKo?~??/??~???B~??/??????????;
??oKKKKo??/??~????~??/??NooooN??/??????????;
ooooKK??oo/oo????KKoo/{{??BBoo??/??????????;
??????????/????KK????/BBoo{{{{~~/??????????;
??{KKKKo??/??~WWwWF??/??~??@Mo??/??????????;
??oKKKKo??/??FWWWW_??/??KooooN??/??????????;
??KKK{KKK?/?????~????/?????~????/??????????;
oo??????oo/rr~~~~~~rr/BBBBBBBBBB/??????????;
??{????{??/??~????~??/???NooN???/??????????;
~~~~~~~~~~/~~~~~~~~~~/NNNNNNNNNN/??????????;
{{{{{{{{oo/rr~~~~rrrr/BBKKKKBBNN/??????????;
????~~????/??????????/oooooooooo/??????????;
??????????/??????????/??????????/??????????;
????oooooo/??~~~~~~rr/??ooooKKNN/??????????;
??????????/{{oo??????/NNBBBB????/??????????;
oooo??????/~~~~~~????/KKoooo????/??????????;
??oo{{oo??/{{~~~~~~{{/~~~~~~~~~~/??????????;
??????????/??????????/oooooooooo/??????????;
????oo????/KKBBoooo??/BBKKoo????/??????????;
~~~~~~~~~~/~~NN{{NNBB/??????????/??????????;
oo????????/~~~~{{oo??/~~~~~~~~~~/BBBBBBBBBB;
ooBBKKBBNN/??????????/??????????/??????????;
????????oo/??oo{{~~~~/~~~~~~~~~~/BBBBBBBBBB;
????????oo/??oo{{~~~~/BBKKBB??BB/??????????;
oo????????/~~~~{{oo??/BBKKBB??BB/??????????;
~~NN~~~~~~/??BB??BB??/??????????/??????????;
??BBKKBBNN/??????????/??????????/??????????;
??????????/??????{{~~/??????KKrr/??????????;
??????????/{{????????/KK????????/??????????;
oooooooooo/~~~~rr~~NN/BB??BB????/??????????;
??????????/????????{{/~~~~{{~~~~/BBBBBBBBBB;
??????????/{{????????/~~~~{{~~~~/BBBBBBBBBB;
??????????/??????????/????????oo/BBBB????BB;
oo????????/~~{{oo{{~~/NNNNNNNNNN/??????????;
~~~~~~~~~~/~~NNBBBBBB/??????????/??????????;
~~~~~~~~~~/BBBBBBNN~~/??????????/??????????;
??????????/{{oo??oo~~/~~~~~~~~~~/BBBBBBBBBB;
????????o{/???o{{{{~~/???~~~~~~~/??????????;
??????????/??????????/oo??????{{/BBBB??BBBB;
oo??????oo/rr~~~~~~rr/rrrrBBrrrr/??????????;
~~oo??oo{{/~~NNBBBBBB/??????????/??????????;
~~oo??oo~~/BBBBBBNN~~/??????????/??????????;
{{{{{{{{oo/rr~~~~rrrr/BBKKKKBBrr/??????????;
????????KK/BB????????/??????????/??????????;
o?????????/~{{{{o????/~~~~~~????/??????????;
????oooooo/??~~~~~~rr/????KK~~rr/??????????;
??????????/??????????/????~~????/????BB????;
oooo??????/~~~~~~????/~~KK??????/??????????;
??????????/??????????/??????????/??????????
)";

constexpr auto font_12x30 = R"(0;1;1;12;0;2;30;0{ @
????www?????/????~~~?????/????FFF?????/????????????/????????????;
????~~~?????/????FFF?????/????????????/????????????/????????????;
??wwwww?????/~~~~~~~~~www/ww~~~~~ww~~~/FFwwwwwFFwww/FF?????FF???;
????www?????/??ww~~~?????/????~~~FF???/??FF~~~ww???/????????????;
????????????/~~~~~~~~~~~~/~~~~~~~~~~~~/~~~~~~~~~~~~/~~~~~~~~~~~~;
????wwwww???/??FF~~~?????/??ww~~~FF???/????~~~?????/????????????;
????????????/????FFFww???/??wwwww??FFF/???????wwFFF/????FFF?????;
?????????www/????~~~??www/????~~~~~~~~/???????FF~~~/???????FF???;
ww??????????/ww??~~~?????/~~~~~~~?????/~~FF????????/??FF????????;
ww???????ww?/??FF???FF???/???????????F/??ww???ww??F/FF???????FF?;
??wwwww?????/~~~~~~~~~www/ww~~~~~ww~~~/??FFFFF??FFF/?????????FFF;
????????????/????????????/????????????/????????????/??FF???FF???;
????????????/????????????/??ww~~~~~~~~/??~~~~~~~~~~/??FFFFFFFFFF;
????????????/????????????/????????????/????????????/FF??FFF??FFF;
????????????/???????????w/???????ww~~~/????FFFFF~~~/????????????;
???wwwww????/??~????w~???/??~?wwF?~???/??~F????~???/???FFFFF????;
????ww??????/???F~~??????/????~~??????/????~~??????/???FFFF?????;
???wwwww????/??F?????~???/???oMMMM@???/??}@????????/??FFFFFFF???;
??wwwwwww???/???????oN???/??????MNo???/??w?????~???/???FFFFF????;
??????ww????/????wF?~????/??wF???~????/??FFFFF~F???/???????F????;
??wwwwwww???/??~ooooo????/??@@@@@@}???/??w?????~???/???FFFFF????;
????wwwww???/??wF????????/??~MMMMMo???/??~?????~???/???FFFFF????;
??wwwwwww???/???????wF???/????ooN?????/????~~??????/????FF??????;
???wwwww????/??~?????~???/??pMMMMMp???/??~?????~???/???FFFFF????;
???wwwww????/??~?????~???/??@MMMMM~???/???????wF???/??FFFFF?????;
????????????/?????????www/???????~~~~~/?????????www/???????FF???;
????????????/????????????/~~??????????/????????????/FF??????????;
?????????www/?????????www/????www~~~~~/????~~~??~~~/????????????;
????????????/????????????/~~~~~~~ww???/~~~~~~~~~???/FFFFFFFFF???;
ww??????????/ww??????????/~~~~www?????/~~??~~~?????/????????????;
??ww????????/??wwwwwFFwww/FF~~~~~~~???/FFFF~~~~~FFF/FFFFFFFFFFFF;
www??????FFF/www~~~~~~www/FFF~~~~~~FFF/www??????FFF/????????????;
????www?????/??oN???No???/??~ooooo~???/??~@@@@@~???/??F?????F???;
????www?????/FF??www?????/ww?????ww???/??FFwwwwwwww/??FFFFF??FFF;
???wwwww????/??~?????F???/??~?????????/??~?????w???/???FFFFF????;
??wwwwww????/??~?????~???/??~?????~???/??~?????~???/??FFFFFF????;
??wwwwwww???/??~?????????/??~MMMM?????/??~?????????/??FFFFFFF???;
????????????/FF??wwwww???/~~ww?????www/ww~~~~~~~www/FFFFFFFFFFFF;
???wwwwww???/??~?????????/??~???MM}???/??~?????~???/???FFFFFF???;
ww??????????/ww??www??www/FFwwwww??www/ww~~~~~ww~~~/FFFFFFFFFFFF;
????wwww????/??????~?????/??????~?????/??????~?????/????FFFF????;
????????????/wwww~~~~~~~~/FF~~~~~FF~~~/~~~~FFFFF~~~/FF??????????;
????????????/FF??????????/ww??????????/??FFwww?????/FF??FFF??FFF;
????????????/~~~~~~~wwwww/~~FF~~~~~FF~/~~FFFFF~~~~~/?????????FF?;
??w?????w???/??~}???}~???/??~?FFF?~???/??~?????~???/??F?????F???;
??w?????w???/??~w????~???/??~?FFw?~???/??~????F~???/??F?????F???;
???wwwww????/??~?????~???/??~?????~???/??~?????~???/???FFFFF????;
????www?????/FFFF?????FFF/ww?????FFwww/ww??FFF?????/FF?????FF???;
????????????/????????????/????FFF?????/FF??wwwww~~~/??FFFFFFFFFF;
??wwwwww????/??~?????~???/??~MMM}M@???/??~???@}????/??F?????F???;
???wwwww????/??~?????F???/??@MMMMMo???/??w?????~???/???FFFFF????;
??wwwwwwww??/??????~?????/??????~?????/??????~?????/??????F?????;
???????????w/~~~wwwww~~~w/www~~~~~www~/FFFFFFFFFFF~/????????????;
??w?????w???/??~?????~???/??~?????~???/???~???~????/????FFF?????;
~~~~~~~~~~~~/~~~~~~~~~~~~/~~~~~~~~~~~~/~~~~~~~~~~~~/????????????;
wwwwwwwww???/~~~~~~~~~~~~/ww~~~~~wwwww/FFwwwwwFF~~~/????????????;
????~~~?????/????FFF?????/????????????/????????????/FFFFFFFFFFFF;
????????????/????????????/????????????/????????????/????????????;
????????????/??ww~~~~~~~~/??~~~~~~~www/???????ww~~~/??FFFFF?????;
????????????/????????????/~~ww????????/~~FFFFF?????/????????????;
????????????/~~~~www?????/~~~~~~~?????/ww??????????/??FFFFF?????;
????www?????/??~~~~~~~???/~~~~~~~~~~~~/~~~~~~~~~~~~/FFFFFFFFFFFF;
????????????/????????????/????????????/????????????/FFFFFFFFFFFF;
????????????/??wwFFF?????/FF??wwwww???/FFww????????/????FFF?????;
~~~~~~~~~~~~/~~~~FFF~~~~~/~~FF~~~FF???/????????????/????????????;
????????????/~~~www??????/~~~~~~~~ww??/~~~~~~~~~~~~/~~~~~~~~~~~~;
??FFwwwFF~~~/FF??????????/????????????/????????????/????????????;
????????????/??????www~~~/??ww~~~~~~~~/~~~~~~~~~~~~/~~~~~~~~~~~~;
????????????/??????www~~~/??ww~~~~~~~~/FFwwFFF??FFF/????????????;
????????????/~~~www??????/~~~~~~~~ww??/FFwwFFF??FFF/????????????;
~~~~~~~~~~~~/FFwwFFF~~FFF/????????????/????????????/????????????;
??FFwwwFF~~~/????????????/????????????/????????????/????????????;
????????????/?????????www/???????~~~~~/???????wwFFF/?????????FFF;
????????????/????????????/~~??????????/ww??????????/????????????;
????????????/~~~~~~~~~~~~/~~~~www~~FFF/FF??FFF?????/????????????;
????????????/????????????/?????????~~~/~~~~www~~~~~/~~~~~~~~~~~~;
????????????/????????????/~~??????????/~~~~www~~~~~/~~~~~~~~~~~~;
????????????/????????????/????????????/????????????/wwww?????~~~;
????????????/~~???????www/~~~~www~~~~~/~~~~~~~~~~~~/????????????;
~~~~~~~~~~~~/~~~~~~~~~~~~/~~FF????????/????????????/????????????;
~~~~~~~~~~~~/~~~~~~~~~~~~/????????FF~~/????????????/????????????;
????????????/?????????www/~~ww???ww~~~/~~~~~~~~~~~~/~~~~~~~~~~~~;
??????????ww/?????????~~~/???w~~~~~~~~/???~~~~~~~~~/???FFFFFFFFF;
????????????/????????????/????????????/?????????www/~~ww???ww~~~;
???????????w/~~~wwwww~~~w/www~~~~~www~/FFFFFFFFFFF~/FFFF???FFFF?;
~~???????www/~~~~www~~~~~/~~FF????????/????????????/????????????;
~~???????~~~/~~~~www~~~~~/????????FF~~/????????????/????????????;
wwwwwwwww???/~~~~~~~~~~~~/ww~~~~~wwwww/FFwwwwwFFFFF/?????????FFF;
?????????www/ww??????????/????????????/????????????/????????????;
????????????/~???????????/~~~~~~w?????/~~~~~~~?????/FFFFFFF?????;
????????????/??ww~~~~~~~~/??~~~~~~~www/????www~~FFF/???????FFFFF;
????????????/????????????/????????????/????~~~?????/????~~~?????;
????????????/~~~~www?????/~~~~~~~?????/~~ww????????/FF??????????;
????????????/????????????/????????????/????????????/????????????
)";

constexpr auto font_10x16 = R"(0;1;1;10;0;2;16;0{ @
????}}????/????BB????/??????????;
????NN????/??????????/??????????;
ww}}}}wwoo/[[ffff[[ff/BB????BB??;
??oo}}????/??WW~~bb??/????@@@@??;
wwwwwwwwww/~~~~~~~~~~/NNNNNNNNNN;
??WW}}EE??/??KK~~BB??/????@@????;
????GGoo??/??CCCC__ZZ/????@@????;
????ww??uu/????FF^^~~/??????BB??;
uu??ww????/~~^^FF????/??BB??????;
EEGG??GGEE/??????????/EE@@??@@EE;
ww}}}}wwoo/CC^^^^CC^^/????????BB;
??????????/??????????/??EE??EE??;
??????????/??{{~~~~~~/??BBBBBBBB;
??????????/??????????/EE??EE??EE;
??????????/????WW[[~~/??????????;
??wEEEuw??/??~oKB?~??/??@EEEE@??;
???W}?????/????~?????/???EFE????;
??WEEEEw??/??oKEEE@??/??FEEEEE??;
??EEEEe]??/??_??BEw??/??@EEEE@??;
???_WE}???/??]XWW~W??/??????F???;
??}EEEEE??/??bBBBB{??/??@EEEE@??;
??_WEEEE??/??~EEEEw??/??@EEEE@??;
??EEEEe]??/????wE@???/????F?????;
??wEEEEw??/??xEEEEx??/??@EEEE@??;
??wEEEEw??/??@EEEe^??/??EEEE@???;
????????oo/??????FFff/??????BB??;
??????????/FF????????/BB????????;
????????uu/????{{FF~~/??????????;
??????????/~~~~~~{{??/BBBBBBBB??;
uu????????/~~FF{{????/??????????;
??cc__WW__/QQ^^~~}}PP/EEEEFFFFEE;
uuwwwwwwpp/bbFFFFFFZZ/??????????;
???wEEw???/??~WWWW~??/??F????F??;
GG??uu????/CCWW__cc__/??BBBB??BB;
??wEEEEW??/??~????_??/??@EEEE@??;
??}EEEEw??/??~????~??/??FEEEE@??;
??}EEEEE??/??~EEE????/??FEEEEE??;
GG??oooo??/ff{{wwwwcc/BBBBBBBBBB;
??wEEEEE??/??~??EE}??/??@EEEEF??;
uu??oo??oo/bb{{{{__{{/BBBBBBBBBB;
????E}E???/?????~????/????EFE???;
oooowwwwww/zz~~^^ZZ~~/BB????????;
GG????????/CCWW__????/BB??BB??BB;
wwwwwwoooo/~~ZZ^^~~zz/????????BB;
??}w??w}??/??~?BB?~??/??F????F??;
??}o???}??/??~?BKo~??/??F????F??;
??wEEEEw??/??~????~??/??@EEEE@??;
GGGGEE??GG/cc??WWBBCC/BB????BB??;
??????????/WW??bb__ww/??BBBBBBBB;
??}EEEEw??/??~EE]e@??/??F???@E??;
??wEEEEW??/??`EEEEw??/??@EEEE@??;
??EEE}EEE?/?????~????/?????F????;
wwooooooww/[[^^^^^^[[/??????????;
??}????}??/??Fw??wF??/???@EE@???;
~~~~~~~~~~/~~~~~~~~~~/??????????;
}}}}}}}}ww/[[ffff[[{{/??????????;
????NN????/??????????/EEEEEEEEEE;
??????????/??????????/??????????;
??oowwwwww/??FFFFff{{/??BBBB????;
??????????/~~[[WW????/??????????;
wwwwoo????/ffFFFF????/??BBBB????;
??ww}}ww??/~~~~~~~~~~/BBBBBBBBBB;
??????????/??????????/EEEEEEEEEE;
??ooGG????/ZZ__CCCC??/????@@????;
~~~~NN~~~~/NNBBNNBB??/??????????;
wwoo??????/~~~~~~{{ww/NNNNNNNNNN;
ooBBKKBBNN/??????????/??????????;
??????ooww/ww{{~~~~~~/NNNNNNNNNN;
??????ooww/WWcc^^FF^^/??@@??????;
wwoo??????/^^ff^^CCWW/??@@??????;
NNrrNN~~NN/??????????/??????????;
??BBKKBBFF/??????????/??????????;
????????oo/??????ff^^/????????BB;
??????????/ff????????/??????????;
wwwwwwwwww/^^FF[[FFBB/??????????;
??????????/wwww__ww~~/NNNNNNNNNN;
??????????/~~ww__wwww/NNNNNNNNNN;
??????????/??????????/KKKK????NN;
ww??????oo/~~~~{{~~~~/??????????;
~~~~~~~~~~/FFBB??????/??????????;
~~~~~~~~~~/??????BBFF/??????????;
????????oo/~~{{oo{{~~/NNNNNNNNNN;
????????w}/???{~~~~~~/???BBBBBBB;
??????????/????????__/NNKK??KKNN;
wwooooooww/[[^^^^^^[[/BBBB??BBBB;
~~wwooww}}/FFBB??????/??????????;
~~wwooww~~/??????BBFF/??????????;
}}}}}}}}ww/[[ffff[[[[/????????BB;
oo??????KK/??????????/??????????;
w?????????/~~~~~{????/BBBBBB????;
??oowwwwww/??FFff~~[[/??????BBBB;
??????????/????ww????/????NN????;
wwwwoo????/~~ffFF????/BB????????;
??????????/??????????/??????????
)";

namespace {

    std::string get_font(const int terminal_id)
    {
        switch (terminal_id) {
            case 1:  // VT220 - 8x10
            case 2:  // VT240 - 8x10
                return font_8x10;
            case 24:  // VT320 - 15x12
            case 42:  // VT1000 - unknown, assumed VT320 compatible
                return font_15x12;
            case 18:  // VT330 - 10x20
            case 19:  // VT340 - 10x20
                return font_10x20;
            case 32:  // VT382J - 12x30
            case 44:  // VT382T - 12x30
                return font_12x30;
            case 41:  // VT420 - 10x16
            case 61:  // VT510 - 10x16
            case 64:  // VT520 - 10x16
            case 65:  // VT525 - 10x16
            case 66:  // VTStar - 10x16
                return font_10x16;
            default:  // Unknown - assume 10x16
                return font_10x16;
        }
    }

}  // namespace

soft_font::soft_font(const capabilities& caps)
{
    auto font_data = get_font(caps.terminal_id);
    if (caps.has_soft_fonts && !font_data.empty()) {
        // Some terminals (like RLogin) will not cope with DECDLD content
        // containing newlines, so we need to strip those out first.
        for (auto i = 0; i < font_data.size(); i++)
            if (font_data[i] == '\n')
                font_data.erase(i--, 1);
        std::cout << "\033P" << font_data << "\033\\";
        // VTStar seems to get itself stuck when downloading a soft font, but
        // that can be fixed by flooding it with a bunch of SGR sequences.
        for (auto i = 0; i < 100; i++)
            std::cout << "\033[0;1m";
        std::cout << "\033[m";
        // We enable the new font by default.
        std::cout << "\033( @";
    }
}

soft_font::~soft_font()
{
    // Make sure the ASCII character set is restored on exit.
    std::cout << "\033(B";
}
